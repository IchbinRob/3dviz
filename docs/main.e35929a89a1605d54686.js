webpackJsonp([0],[,function(e,t,i){"use strict";(function(e){function n(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(6);var o=i(26),r=(n(o),i(25)),c=n(r),h=i(24),u=n(h);i(15),i(14),i(16),i(8),i(12),i(11),i(10),i(13),i(7),i(9);var l=i(5),d=n(l),f=i(17),m=n(f),p=i(18),v=n(p),y=i(19),g=n(y),b=i(20),x=n(b),w=i(21),S=n(w),k=i(22),P=n(k),E=i(23),M=n(E),_=[m.default,v.default,g.default,x.default,S.default,P.default,M.default],C=[157,92,130,156,126,120,140],T=function(){function t(i){a(this,t),this.container=document.querySelector("#main"),document.body.appendChild(this.container);this.sound=new d.default(_,C,0),this.sound.musicReady=this.musicReady.bind(this),this.materialShader=[],this.afterimagePass,this.zoom=0,this.cameraMoveScale=5,this.cameraMoveSpeed=1,this.isCameraChange=!1,this.isCameraDecal=!1,this.stopMove=!1,this.camera=new e.PerspectiveCamera(180,this.WIDTH/this.HEIGHT,.1,1e6),this.camera.position.z=3,this.camera.position.y=-1,this.camera.rotation.x=.5,this.scene=new e.Scene,this.mainGroup=new e.Group,this.setSceneOptions(),this.setlights(),this.setTerrain(),this.setWind(),this.setBuiding(),this.setMainGroupOptions(),this.scene.add(this.mainGroup);var n=e.ShaderChunk.shadowmap_pars_fragment;n=n.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n"+u.default+"\n"),n=n.replace("#if defined( SHADOWMAP_TYPE_PCF )","return PCSS( shadowMap, shadowCoord );\n#if defined( SHADOWMAP_TYPE_PCF )"),e.ShaderChunk.shadowmap_pars_fragment=n,this.renderer=new e.WebGLRenderer({antialias:!0}),this.quality=i,this.renderer.shadowMap.enabled=!0,this.renderer.setPixelRatio(window.devicePixelRatio),this.HEIGHT=window.innerHeight/this.quality,this.WIDTH=4*window.innerHeight/3/this.quality,this.renderer.setSize(this.WIDTH,this.HEIGHT),this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize.bind(this),!1),this.composer=new e.EffectComposer(this.renderer),this.composer.addPass(new e.RenderPass(this.scene,this.camera)),this.ssaaRenderPass=new e.SSAARenderPass(this.scene,this.camera),this.quality,this.ssaaRenderPass.sampleLevel=0,this.ssaaRenderPass.unbiased=!0,this.composer.addPass(this.ssaaRenderPass),this.glitchPass=new e.GlitchPass,this.composer.addPass(this.glitchPass),this.afterimagePass=new e.AfterimagePass,this.afterimagePass.renderToScreen=!0,this.composer.addPass(this.afterimagePass)}return s(t,[{key:"musicReady",value:function(){this.amp=1,this.kick=20,this.sound.onKickDetected=this.onKickDetected.bind(this),this.sound.offKickDetected=this.offKickDetected.bind(this),this.sound.onBeat=this.onBeat.bind(this),this.sound.cameraChange=this.cameraChange.bind(this),this.sound.cameraMove=this.cameraMove.bind(this),this.sound.cameraDecal=this.cameraDecal.bind(this),this.renderer.animate(this.render.bind(this)),this.onWindowResize()}},{key:"cameraDecal",value:function(e){this.isCameraDecal="on"===e}},{key:"cameraChange",value:function(e){this.isCameraChange="on"===e}},{key:"onKickDetected",value:function(e,t){var i=this;switch(e){case"saturation":this.kick>=1&&(this.kick-=.5),this.materialShaderMountain.uniforms.u_kick.value=this.kick,this.amp<=t/255*15&&(this.amp+=.05),this.materialShaderMountain.uniforms.u_amp.value=this.materialShaderDesert.uniforms.u_amp.value=this.amp;break;case"beat":this.glitchPass.goWild=!0,setTimeout(function(){i.glitchPass.goWild=!1},700)}}},{key:"offKickDetected",value:function(e){if(this.materialShaderMountain)switch(e){case"saturation":this.kick<=20&&(this.kick+=.1),this.amp>=0&&(this.amp-=.01),this.materialShaderMountain.uniforms.u_amp.value=this.materialShaderDesert.uniforms.u_amp.value=this.amp,this.materialShaderMountain.uniforms.u_kick.value=this.kick}}},{key:"cameraMove",value:function(e){this.cameraMoveScale=.5,this.cameraMoveSpeed=2,"off"===e&&(this.stopMove=!0)}},{key:"onBeat",value:function(){console.log("coucou"),this.city,this.city.children.forEach(function(e){e.scale.y+=1,setTimeout(function(){e.scale.y-=1},500)})}},{key:"setSceneOptions",value:function(){this.scene.background=new e.Color(327964),this.scene.fog=new e.Fog(327964,0,40)}},{key:"setlights",value:function(){var t=new e.AmbientLight(16777215);this.scene.add(t),this.dirLight=new e.SpotLight(16777215,1,400),this.dirLight.castShadow=!0,this.dirLight.position.z=-30,this.dirLight.position.y=175,this.dirLight.position.x=20,this.dirLight.shadow.camera.near=125,this.dirLight.shadow.camera.far=200,this.scene.add(this.dirLight);new e.CameraHelper(this.dirLight.shadow.camera)}},{key:"setTerrain",value:function(){var t=this,i=new e.Group;this.shaderTransform=["vec3 transformed = vec3(position.x, position.y, (smoothstep(0., 4.0, position.x)+smoothstep(-0., -4., position.x)) * snoise(vec3(position.x/20., position.y/20. + u_time, 0)) * u_amp);","vec3 transformed = vec3( position.x, position.y, (smoothstep(1., 4.0, position.x)+smoothstep(-1., -4., position.x)) * snoise(vec3(position.x/u_kick, position.y/u_kick + u_time, 0)) * u_amp );"];var n=new e.PlaneBufferGeometry(200,200,512,512),a=new e.MeshStandardMaterial({color:new e.Color(9984514),emissive:new e.Color(4785485),metalness:0,roughness:1});a.onBeforeCompile=function(e){e.uniforms.u_time={value:1,type:"f"},e.uniforms.u_amp={value:t.amp,type:"f"},e.vertexShader="uniform float u_time;\nuniform float u_amp;\n"+c.default+"\n"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",["float theta = sin( u_time + position.y ) / 2.;","float c = cos( .5+ (theta*1.)/3.);","float s = sin( .5+(theta*1.)/3.);","mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );",t.shaderTransform[0],"vNormal = vNormal * m;"].join("\n")),t.materialShaderDesert=e};var s=new e.Mesh(n,a);i.add(s);var o=new e.PlaneBufferGeometry(200,200,512,512),r=new e.MeshStandardMaterial({color:new e.Color(5402009),emissive:new e.Color(4785485),metalness:1,roughness:0,transparent:!0,opacity:.5,wireframe:!1});r.onBeforeCompile=function(e){e.uniforms.u_time={value:1,type:"f"},e.uniforms.u_amp={value:t.amp,type:"f"},e.uniforms.u_kick={value:t.kick,type:"f"},e.vertexShader="uniform float u_time;\nuniform float u_amp;\nuniform float u_kick;\n"+c.default+"\n"+e.vertexShader,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>",["float theta = sin( u_time + position.y ) / 2.;","float c = cos( .5+ (theta*1.)/3.);","float s = sin( .5+(theta*1.)/3.);","mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );",t.shaderTransform[1],"vNormal = vNormal * m;"].join("\n")),t.materialShaderMountain=e};var h=new e.Mesh(o,r);h.position.z=-1,s.castShadow=!0,h.castShadow=!0,s.receiveShadow=!0,h.receiveShadow=!0,i.add(h),i.rotation.x=-Math.PI/2,i.receiveShadow=!0,i.castShadow=!0,i.position.y=-1,this.mainGroup.add(i)}},{key:"setWind",value:function(){this.particlesData=[],this.particulesPositions,this.particulesColors;var t;this.pointCloud;this.particlePositions,this.linesMesh,this.particleCount=500;var i=100;this.rHalf=50,this.effectController={showDots:!0,showLines:!0,minDistance:150,limitConnections:!1,maxConnections:20,particleCount:this.particleCount};this.particulesPositions=new Float32Array(3e6),this.particulesColors=new Float32Array(3e6);var n=new e.PointsMaterial({color:16777215,size:1,blending:e.AdditiveBlending,transparent:!0,opacity:.5,sizeAttenuation:!1});t=new e.BufferGeometry,this.particlePositions=new Float32Array(3e3);for(var a=0;a<1e3;a++){var s=Math.random()*i-50,o=Math.random()*i-50,r=Math.random()*i-50;this.particlePositions[3*a]=s,this.particlePositions[3*a+1]=o,this.particlePositions[3*a+2]=r,this.particlesData.push({velocity:new e.Vector3(Math.cos(2*Math.random()-1),Math.cos(2*Math.random()-1),Math.cos(2*Math.random()-1)),numConnections:0})}t.setDrawRange(0,this.particleCount),t.addAttribute("position",new e.BufferAttribute(this.particlePositions,3).setDynamic(!0)),this.pointCloud=new e.Points(t,n),this.mainGroup.add(this.pointCloud);var c=new e.BufferGeometry;c.addAttribute("position",new e.BufferAttribute(this.particulesPositions,3).setDynamic(!0)),c.addAttribute("color",new e.BufferAttribute(this.particulesColors,3).setDynamic(!0)),c.computeBoundingSphere(),c.setDrawRange(0,0);var h=new e.LineBasicMaterial({vertexColors:e.VertexColors,blending:e.AdditiveBlending,transparent:!0});this.linesMesh=new e.LineSegments(c,h),this.mainGroup.add(this.linesMesh)}},{key:"setBuiding",value:function(){this.city=new e.Group;for(var t=0;t<50;t++){var i=new e.BoxBufferGeometry(3,50*Math.random(),1),n=new e.MeshStandardMaterial({roughness:0}),a=new e.Mesh(i,n);a.receiveShadow=!0,a.castShadow=!0,a.position.set(20*Math.cos(t),0,10*Math.cos(t)),this.city.add(a)}for(var s=0;s<50;s++){var o=new e.BoxBufferGeometry(3,50*Math.random(),1),n=new e.MeshStandardMaterial({roughness:0}),r=new e.Mesh(o,n);r.receiveShadow=!0,r.castShadow=!0,r.position.set(20*-Math.cos(s),0,10*Math.cos(s)),this.city.add(r)}this.city.position.z=-25,this.dirLight.target=this.city,this.mainGroup.add(this.city)}},{key:"setMainGroupOptions",value:function(){this.mainGroup.rotation.x=.6}},{key:"render",value:function(){var t=this;this.time=performance.now()/1e3,this.materialShaderDesert&&(this.materialShaderDesert.uniforms.u_time.value=this.time,this.materialShaderMountain.uniforms.u_time.value=this.time),this.camera.fov>80&&(this.camera.fov-=.01,this.camera.updateProjectionMatrix()),this.isCameraChange?(this.camera.position.z>=0&&(this.camera.position.z-=.01),this.camera.position.y<=25&&(this.camera.position.y+=.1),this.mainGroup.rotation.x>=0&&(this.mainGroup.rotation.x-=.01)):(this.camera.position.z<=3&&(this.camera.position.z+=.01),this.camera.position.y>=-1&&(this.camera.position.y-=.1),this.mainGroup.rotation.x<=.6&&(this.mainGroup.rotation.x+=.01)),this.isCameraDecal&&setTimeout(function(){t.camera.position.x=15*Math.cos(t.time)},1e3*Math.random()),this.camera.position.x>.5?this.camera.position.x-=.1:this.camera.position.x<.5&&(this.camera.position.x+=.1),1==this.stopMove?this.camera.lookAt(new e.Vector3(0,1,0)):this.camera.lookAt(new e.Vector3(Math.sin(this.time/this.cameraMoveScale)/this.cameraMoveSpeed,Math.cos(this.time/this.cameraMoveScale)/this.cameraMoveSpeed+1,0)),this.composer.render(this.scene,this.camera)}},{key:"onWindowResize",value:function(){this.camera.aspect=this.WIDTH/this.HEIGHT,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.composer.setSize(this.WIDTH,this.HEIGHT),1!==this.quality&&(document.querySelector("canvas").style.width="inherit",document.querySelector("canvas").style.height="100vh")}}]),t}();t.default=T}).call(t,i(0))},function(e,t){},function(e,t,i){"use strict";i(2);var n=i(1),a=function(e){return e&&e.__esModule?e:{default:e}}(n);document.getElementById("play").addEventListener("click",function(){window.app=new a.default(document.getElementById("quality").options[document.getElementById("quality").selectedIndex].value),document.getElementById("home").style.display="none"})},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(){function e(t,i,a,s){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n(this,e),this.ctx;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.ctx=new AudioContext}catch(e){throw new Error("Web Audio API is not supported in this browser")}this._bpm=i,this._beatDuration=60/this._bpm,this._offsetTime=a,this._sections=[],this._kicks=[],this._beats=[],this._startTime=0,this._pauseTime=0,this._isPlaying=!1,this._isLoaded=!1,this._progress=0,this._onUpdate=this.onUpdate.bind(this),this._onEnded=this.onEnded.bind(this),this.gainNode=this.ctx.createGain(),this.gainNode.connect(this.ctx.destination),this.analyserNode=this.ctx.createAnalyser(),this.analyserNode.connect(this.gainNode),this.analyserNode.smoothingTimeConstant=.8,this.analyserNode.fftSize=512;var r=this.analyserNode.frequencyBinCount;this.frequencyDataArray=new Uint8Array(r),this.timeDomainDataArray=new Uint8Array(r),o&&(this.debug=new c(this)),this._load(t,s),window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,window.cancelAnimationFrame=window.cancelAnimationFrame||window.mozCancelAnimationFrame}return a(e,[{key:"_load",value:function(e,t){var i=this;if(e){this._isLoaded=!1,this._progress=0;var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onprogress=function(e){i._progress=e.loaded/e.total},n.onload=function(){i.ctx.decodeAudioData(n.response,function(e){i._buffer=e,i._isLoaded=!0,t&&t()},function(e){console.log(e)})},n.send()}}},{key:"play",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.req&&cancelAnimationFrame(this.req),this._onUpdate(),this._isPlaying=!0;var t=this._pauseTime-this._startTime+e;this._startTime=this.ctx.currentTime-t,this.sourceNode=this.ctx.createBufferSource(),this.sourceNode.connect(this.analyserNode),this.sourceNode.buffer=this._buffer,this.sourceNode.start(0,t),this.sourceNode.addEventListener("ended",this._onEnded,!1)}},{key:"pause",value:function(){this.req&&cancelAnimationFrame(this.req),this.sourceNode&&(this.sourceNode.removeEventListener("ended",this._onEnded,!1),this.sourceNode.stop(0),this.sourceNode.disconnect(),this.sourceNode=null),this._pauseTime=this.ctx.currentTime,this._isPlaying=!1}},{key:"before",value:function(e,t,i){var n=this;return this._sections.push({label:e,condition:function(){return n.time<t},callback:i}),this}},{key:"after",value:function(e,t,i){var n=this;return this._sections.push({label:e,condition:function(){return n.time>t},callback:i}),this}},{key:"between",value:function(e,t,i,n){var a=this;return this._sections.push({label:e,condition:function(){return a.time>t&&a.time<i},callback:n}),this}},{key:"onceAt",value:function(e,t,i){var n=this,a=null;return this._sections.push({label:e,condition:function(){return n.time>t&&!this.called},callback:function(){console.log("once :",a.label),i.call(this),a.called=!0},called:!1}),a=this._sections[this._sections.length-1],this}},{key:"getSpectrum",value:function(){return this.analyserNode.getByteFrequencyData(this.frequencyDataArray),this.frequencyDataArray}},{key:"getWaveform",value:function(){return this.analyserNode.getByteTimeDomainData(this.timeDomainDataArray),this.timeDomainDataArray}},{key:"getFrequency",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,n=this.getSpectrum();if(void 0!==t){for(var a=e;a<=t;a++)i+=n[a];return i/(t-e+1)}return n[e]}},{key:"createKick",value:function(e){var t=e.frequency,i=e.threshold,n=e.decay,a=e.onKick,s=e.offKick,r=new o({frequency:t,threshold:i,decay:n,onKick:a,offKick:s});return this._kicks.push(r),r}},{key:"createBeat",value:function(e){var t=e.factor,i=e.onBeat,n=new r({factor:t,onBeat:i});return this._beats.push(n),n}},{key:"onUpdate",value:function(){this.req=requestAnimationFrame(this._onUpdate);for(var e in this._sections)this._sections[e].condition()&&this._sections[e].callback.call(this);var t=this.getSpectrum();for(var i in this._kicks)this._kicks[i].calc(t);var n=Math.max(0,this.time-this._offsetTime);for(var a in this._beats)this._beats[a].calc(n,this._beatDuration);this.debug&&this.debug.draw()}},{key:"onEnded",value:function(){this.pause()}},{key:"progress",get:function(){return this._progress}},{key:"isLoaded",get:function(){return this._isLoaded}},{key:"duration",get:function(){return this._isLoaded?this._buffer.duration:0}},{key:"time",get:function(){return this.isPlaying?this.ctx.currentTime-this._startTime:this._pauseTime-this._startTime}},{key:"volume",set:function(e){this.gainNode.gain.value=e},get:function(){return this.gainNode.gain.value}},{key:"isPlaying",get:function(){return this._isPlaying}},{key:"beatDuration",get:function(){return this._beatDuration}}]),e}();t.default=s;var o=function(){function e(t){var i=t.frequency,a=t.threshold,s=t.decay,o=t.onKick,r=t.offKick;n(this,e),this.frequency=void 0!==i?i:[0,10],this.threshold=void 0!==a?a:.3,this.decay=void 0!==s?s:.02,this.onKick=o,this.offKick=r,this.isOn=!1,this.isKick=!1,this.currentThreshold=this.threshold}return a(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.frequency,i=e.threshold,n=e.decay,a=e.onKick,s=e.offKick;this.frequency=void 0!==t?t:this.frequency,this.threshold=void 0!==i?i:this.threshold,this.decay=void 0!==n?n:this.decay,this.onKick=a||this.onKick,this.offKick=s||this.offKick}},{key:"calc",value:function(e){if(this.isOn){var t=this.maxAmplitude(e,this.frequency);t>=this.currentThreshold&&t>=this.threshold?(this.currentThreshold=t,this.onKick&&this.onKick(t),this.isKick=!0):(this.offKick&&this.offKick(t),this.currentThreshold-=this.decay,this.isKick=!1)}}},{key:"maxAmplitude",value:function(e,t){var i=0;if(!t.length)return t<e.length?e[~~t]:null;for(var n=t[0],a=t[1];n<=a;n++)e[n]>i&&(i=e[n]);return i}}]),e}(),r=function(){function e(t){var i=t.factor,a=t.onBeat;n(this,e),this.factor=void 0!==i?i:1,this.onBeat=a,this.isOn=!1,this.currentTime=0}return a(e,[{key:"on",value:function(){this.isOn=!0}},{key:"off",value:function(){this.isOn=!1}},{key:"set",value:function(e){var t=e.factor,i=e.onBeat;this.factor=void 0!==t?t:this.factor,this.onBeat=i||this.onBeat}},{key:"calc",value:function(e,t){if(0!=e){var i=t*this.factor;e>=this.currentTime+i&&(this.isOn&&this.onBeat&&this.onBeat(),this.currentTime+=i)}}}]),e}(),c=function(){function e(t){n(this,e),this.sound=t,this.canvas=document.createElement("canvas"),this.canvas.width=512,this.canvas.height=300,this.canvas.style.position="absolute",this.canvas.style.bottom=0,this.canvas.style.left=0,this.canvas.style.zIndex=3,document.body.appendChild(this.canvas),this.ctx=this.canvas.getContext("2d"),window.addEventListener("resize",this.resize.bind(this),!1),this.resize()}return a(e,[{key:"resize",value:function(){this.canvas.width=window.innerWidth}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.beginPath(),this.ctx.rect(0,0,this.canvas.width,this.canvas.height),this.ctx.fillStyle="#000000",this.ctx.fill(),this.ctx.strokeStyle="#a1a1a1",this.ctx.stroke(),this.ctx.beginPath();for(var e=this.sound.getSpectrum(),t=null,i=e.length,n=this.canvas.width/i,a=this.canvas.height-10,s=0;s<i;s++)t=e[s]/256,this.ctx.rect(s*n,a-a*t,n/2,a*t);this.ctx.fillStyle="#ffffff",this.ctx.fill(),this.ctx.beginPath(),this.ctx.font="10px Arial",this.ctx.textBaseline="middle",this.ctx.textAlign="left";for(var o=0,r=i;o<r;o++)o%10==0&&(this.ctx.rect(o*n,a,n/2,10),this.ctx.fillText(o,o*n+4,a+5));this.ctx.fillStyle="#ffffff",this.ctx.fill();for(var c=this.sound._kicks,h=null,u=c.length,l=null,d=null,f=0,m=u;f<m;f++)h=c[f],h.isOn&&(l=h.frequency.length?h.frequency[0]:h.frequency,d=h.frequency.length?h.frequency[1]-h.frequency[0]+1:1,this.ctx.beginPath(),this.ctx.rect(l*n,a-a*(h.threshold/256),d*n-.5*n,2),this.ctx.rect(l*n,a-a*(h.currentThreshold/256),d*n-.5*n,5),this.ctx.fillStyle=h.isKick?"#00ff00":"#ff0000",this.ctx.fill());this.ctx.beginPath();for(var p=this.sound.getWaveform(),v=null,y=p.length,g=this.canvas.width/y,b=this.canvas.height-10,x=0;x<y;x++)v=p[x]/256,0==x?this.ctx.moveTo(x*g,b*v):this.ctx.lineTo(x*g,b*v);this.ctx.strokeStyle="#0000ff",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.textAlign="right",this.ctx.textBaseline="top",this.ctx.font="15px Arial",this.ctx.fillStyle="#ffffff",this.ctx.fillText(Math.round(10*this.sound.time)/10+" / "+Math.round(10*this.sound.duration)/10,this.canvas.width-5,5),this.ctx.beginPath();for(var w=this.sound._sections,S=null,k=w.length,P="",E=0,M=k;E<M;E++)S=w[E],S.condition()&&(P+=S.label+" - ");P.length>0&&(P=P.substr(0,P.length-3)),this.ctx.fillText(P,this.canvas.width-5,25),this.ctx.fill()}}]),e}()},function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(4),o=function(e){return e&&e.__esModule?e:{default:e}}(s),r=function(){function e(t,i,a){n(this,e),this.onKickDetected=null,this.offKickDetected=null,this.musicReady=null,this.onBeat=null,this.cameraMove=null,this.cameraChange=null,this.cameraDecal=null,this.audioAnalyzer=new o.default(t[a],i[a],61,this.playSound.bind(this),!1)}return a(e,[{key:"playSound",value:function(){var e=this;this.musicReady();var t=[120,250];this.kick=this.audioAnalyzer.createKick({frequency:t,threshold:75,decay:1.5,onKick:function(t){e.onKickDetected("saturation",t)},offKick:function(t){e.offKickDetected("saturation")}}),this.kick.on();var i=[90,100];this.kickBeat=this.audioAnalyzer.createKick({frequency:i,threshold:90,decay:.5,onKick:function(t){e.onKickDetected("beat",t)},offKick:function(t){e.offKickDetected("beat")}}),this.kickBeat.on(),this.beat=this.audioAnalyzer.createBeat({factor:1,onBeat:function(){e.onBeat()}}),this.audioAnalyzer.after("offBeatKick",61,function(){e.kickBeat.off(),e.beat.on()}),this.audioAnalyzer.between("changeCamOn",75,185,function(){e.cameraChange("on")}).after("changeCamOn",185,function(){e.cameraChange("off")}),this.audioAnalyzer.between("WOUSH",195,270,function(){e.cameraDecal("on")}),this.audioAnalyzer.after("WOUSHoff",270,function(){e.cameraDecal("off")}),this.audioAnalyzer.after("WOUHOUon",270,function(){e.cameraMove("on")}),this.audioAnalyzer.after("WOUHOUoff",320,function(){e.cameraMove("off"),e.beat.off()}),this.audioAnalyzer.play()}}]),e}();t.default=r},function(e,t,i){"use strict";(function(e){e.OrbitControls=function(t,i){function n(){return 2*Math.PI/60/60*R.autoRotateSpeed}function a(){return Math.pow(.95,R.zoomSpeed)}function s(e){j.theta-=e}function o(e){j.phi-=e}function r(e){R.object.isPerspectiveCamera?H/=e:R.object.isOrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom*e)),R.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function c(e){R.object.isPerspectiveCamera?H*=e:R.object.isOrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom/e)),R.object.updateProjectionMatrix(),I=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function h(e){q.set(e.clientX,e.clientY)}function u(e){X.set(e.clientX,e.clientY)}function l(e){V.set(e.clientX,e.clientY)}function d(e){K.set(e.clientX,e.clientY),W.subVectors(K,q).multiplyScalar(R.rotateSpeed);var t=R.domElement===document?R.domElement.body:R.domElement;s(2*Math.PI*W.x/t.clientHeight),o(2*Math.PI*W.y/t.clientHeight),q.copy(K),R.update()}function f(e){Q.set(e.clientX,e.clientY),J.subVectors(Q,X),J.y>0?r(a()):J.y<0&&c(a()),X.copy(Q),R.update()}function m(e){Z.set(e.clientX,e.clientY),Y.subVectors(Z,V).multiplyScalar(R.panSpeed),te(Y.x,Y.y),V.copy(Z),R.update()}function p(e){}function v(e){e.deltaY<0?c(a()):e.deltaY>0&&r(a()),R.update()}function y(e){switch(e.keyCode){case R.keys.UP:te(0,R.keyPanSpeed),R.update();break;case R.keys.BOTTOM:te(0,-R.keyPanSpeed),R.update();break;case R.keys.LEFT:te(R.keyPanSpeed,0),R.update();break;case R.keys.RIGHT:te(-R.keyPanSpeed,0),R.update()}}function g(e){q.set(e.touches[0].pageX,e.touches[0].pageY)}function b(e){if(R.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);X.set(0,n)}if(R.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);V.set(a,s)}}function x(e){K.set(e.touches[0].pageX,e.touches[0].pageY),W.subVectors(K,q).multiplyScalar(R.rotateSpeed);var t=R.domElement===document?R.domElement.body:R.domElement;s(2*Math.PI*W.x/t.clientHeight),o(2*Math.PI*W.y/t.clientHeight),q.copy(K),R.update()}function w(e){if(R.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);Q.set(0,n),J.set(0,Math.pow(Q.y/X.y,R.zoomSpeed)),r(J.y),X.copy(Q)}if(R.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),s=.5*(e.touches[0].pageY+e.touches[1].pageY);Z.set(a,s),Y.subVectors(Z,V).multiplyScalar(R.panSpeed),te(Y.x,Y.y),V.copy(Z)}R.update()}function S(e){}function k(e){if(!1!==R.enabled){switch(e.preventDefault(),e.button){case R.mouseButtons.LEFT:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===R.enablePan)return;l(e),N=B.PAN}else{if(!1===R.enableRotate)return;h(e),N=B.ROTATE}break;case R.mouseButtons.MIDDLE:if(!1===R.enableZoom)return;u(e),N=B.DOLLY;break;case R.mouseButtons.RIGHT:if(!1===R.enablePan)return;l(e),N=B.PAN}N!==B.NONE&&(document.addEventListener("mousemove",P,!1),document.addEventListener("mouseup",E,!1),R.dispatchEvent(L))}}function P(e){if(!1!==R.enabled)switch(e.preventDefault(),N){case B.ROTATE:if(!1===R.enableRotate)return;d(e);break;case B.DOLLY:if(!1===R.enableZoom)return;f(e);break;case B.PAN:if(!1===R.enablePan)return;m(e)}}function E(e){!1!==R.enabled&&(p(e),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",E,!1),R.dispatchEvent(z),N=B.NONE)}function M(e){!1===R.enabled||!1===R.enableZoom||N!==B.NONE&&N!==B.ROTATE||(e.preventDefault(),e.stopPropagation(),R.dispatchEvent(L),v(e),R.dispatchEvent(z))}function _(e){!1!==R.enabled&&!1!==R.enableKeys&&!1!==R.enablePan&&y(e)}function C(e){if(!1!==R.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===R.enableRotate)return;g(e),N=B.TOUCH_ROTATE;break;case 2:if(!1===R.enableZoom&&!1===R.enablePan)return;b(e),N=B.TOUCH_DOLLY_PAN;break;default:N=B.NONE}N!==B.NONE&&R.dispatchEvent(L)}}function T(e){if(!1!==R.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===R.enableRotate)return;if(N!==B.TOUCH_ROTATE)return;x(e);break;case 2:if(!1===R.enableZoom&&!1===R.enablePan)return;if(N!==B.TOUCH_DOLLY_PAN)return;w(e);break;default:N=B.NONE}}function A(e){!1!==R.enabled&&(S(e),R.dispatchEvent(z),N=B.NONE)}function D(e){!1!==R.enabled&&e.preventDefault()}this.object=t,this.domElement=void 0!==i?i:document,this.enabled=!0,this.target=new e.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:e.MOUSE.LEFT,MIDDLE:e.MOUSE.MIDDLE,RIGHT:e.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return U.phi},this.getAzimuthalAngle=function(){return U.theta},this.saveState=function(){R.target0.copy(R.target),R.position0.copy(R.object.position),R.zoom0=R.object.zoom},this.reset=function(){R.target.copy(R.target0),R.object.position.copy(R.position0),R.object.zoom=R.zoom0,R.object.updateProjectionMatrix(),R.dispatchEvent(O),R.update(),N=B.NONE},this.update=function(){var i=new e.Vector3,a=(new e.Quaternion).setFromUnitVectors(t.up,new e.Vector3(0,1,0)),o=a.clone().inverse(),r=new e.Vector3,c=new e.Quaternion;return function(){var e=R.object.position;return i.copy(e).sub(R.target),i.applyQuaternion(a),U.setFromVector3(i),R.autoRotate&&N===B.NONE&&s(n()),U.theta+=j.theta,U.phi+=j.phi,U.theta=Math.max(R.minAzimuthAngle,Math.min(R.maxAzimuthAngle,U.theta)),U.phi=Math.max(R.minPolarAngle,Math.min(R.maxPolarAngle,U.phi)),U.makeSafe(),U.radius*=H,U.radius=Math.max(R.minDistance,Math.min(R.maxDistance,U.radius)),R.target.add(G),i.setFromSpherical(U),i.applyQuaternion(o),e.copy(R.target).add(i),R.object.lookAt(R.target),!0===R.enableDamping?(j.theta*=1-R.dampingFactor,j.phi*=1-R.dampingFactor,G.multiplyScalar(1-R.dampingFactor)):(j.set(0,0,0),G.set(0,0,0)),H=1,!!(I||r.distanceToSquared(R.object.position)>F||8*(1-c.dot(R.object.quaternion))>F)&&(R.dispatchEvent(O),r.copy(R.object.position),c.copy(R.object.quaternion),I=!1,!0)}}(),this.dispose=function(){R.domElement.removeEventListener("contextmenu",D,!1),R.domElement.removeEventListener("mousedown",k,!1),R.domElement.removeEventListener("wheel",M,!1),R.domElement.removeEventListener("touchstart",C,!1),R.domElement.removeEventListener("touchend",A,!1),R.domElement.removeEventListener("touchmove",T,!1),document.removeEventListener("mousemove",P,!1),document.removeEventListener("mouseup",E,!1),window.removeEventListener("keydown",_,!1)};var R=this,O={type:"change"},L={type:"start"},z={type:"end"},B={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},N=B.NONE,F=1e-6,U=new e.Spherical,j=new e.Spherical,H=1,G=new e.Vector3,I=!1,q=new e.Vector2,K=new e.Vector2,W=new e.Vector2,V=new e.Vector2,Z=new e.Vector2,Y=new e.Vector2,X=new e.Vector2,Q=new e.Vector2,J=new e.Vector2,$=function(){var t=new e.Vector3;return function(e,i){t.setFromMatrixColumn(i,0),t.multiplyScalar(-e),G.add(t)}}(),ee=function(){var t=new e.Vector3;return function(e,i){!0===R.screenSpacePanning?t.setFromMatrixColumn(i,1):(t.setFromMatrixColumn(i,0),t.crossVectors(R.object.up,t)),t.multiplyScalar(e),G.add(t)}}(),te=function(){var t=new e.Vector3;return function(e,i){var n=R.domElement===document?R.domElement.body:R.domElement;if(R.object.isPerspectiveCamera){var a=R.object.position;t.copy(a).sub(R.target);var s=t.length();s*=Math.tan(R.object.fov/2*Math.PI/180),$(2*e*s/n.clientHeight,R.object.matrix),ee(2*i*s/n.clientHeight,R.object.matrix)}else R.object.isOrthographicCamera?($(e*(R.object.right-R.object.left)/R.object.zoom/n.clientWidth,R.object.matrix),ee(i*(R.object.top-R.object.bottom)/R.object.zoom/n.clientHeight,R.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),R.enablePan=!1)}}();R.domElement.addEventListener("contextmenu",D,!1),R.domElement.addEventListener("mousedown",k,!1),R.domElement.addEventListener("wheel",M,!1),R.domElement.addEventListener("touchstart",C,!1),R.domElement.addEventListener("touchend",A,!1),R.domElement.addEventListener("touchmove",T,!1),window.addEventListener("keydown",_,!1),this.update()},e.OrbitControls.prototype=Object.create(e.EventDispatcher.prototype),e.OrbitControls.prototype.constructor=e.OrbitControls,Object.defineProperties(e.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.AfterimagePass=function(t){e.Pass.call(this),void 0===e.AfterimageShader&&console.error("THREE.AfterimagePass relies on THREE.AfterimageShader"),this.shader=e.AfterimageShader,this.uniforms=e.UniformsUtils.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==t?t:.96,this.textureComp=new e.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:e.LinearFilter,magFilter:e.NearestFilter,format:e.RGBAFormat}),this.textureOld=new e.WebGLRenderTarget(window.innerWidth,window.innerHeight,{minFilter:e.LinearFilter,magFilter:e.NearestFilter,format:e.RGBAFormat}),this.shaderMaterial=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.sceneComp=new e.Scene,this.scene=new e.Scene,this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.camera.position.z=1;var i=new e.PlaneBufferGeometry(2,2);this.quadComp=new e.Mesh(i,this.shaderMaterial),this.sceneComp.add(this.quadComp);var n=new e.MeshBasicMaterial({map:this.textureComp.texture}),a=new e.Mesh(i,n);this.scene.add(a)},e.AfterimagePass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.AfterimagePass,render:function(e,t,i){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=i.texture,this.quadComp.material=this.shaderMaterial,e.render(this.sceneComp,this.camera,this.textureComp),e.render(this.scene,this.camera,this.textureOld),this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.EffectComposer=function(t,i){if(this.renderer=t,void 0===i){var n={minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat,stencilBuffer:!1},a=t.getDrawingBufferSize();i=new e.WebGLRenderTarget(a.width,a.height,n),i.texture.name="EffectComposer.rt1"}this.renderTarget1=i,this.renderTarget2=i.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.passes=[],void 0===e.CopyShader&&console.error("THREE.EffectComposer relies on THREE.CopyShader"),void 0===e.ShaderPass&&console.error("THREE.EffectComposer relies on THREE.ShaderPass"),this.copyPass=new e.ShaderPass(e.CopyShader)},Object.assign(e.EffectComposer.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e);var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height)},insertPass:function(e,t){this.passes.splice(t,0,e)},render:function(t){var i,n,a=!1,s=this.passes.length;for(n=0;n<s;n++)if(i=this.passes[n],!1!==i.enabled){if(i.render(this.renderer,this.writeBuffer,this.readBuffer,t,a),i.needsSwap){if(a){var o=this.renderer.context;o.stencilFunc(o.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),o.stencilFunc(o.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==e.MaskPass&&(i instanceof e.MaskPass?a=!0:i instanceof e.ClearMaskPass&&(a=!1))}},reset:function(e){if(void 0===e){var t=this.renderer.getDrawingBufferSize();e=this.renderTarget1.clone(),e.setSize(t.width,t.height)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this.renderTarget1.setSize(e,t),this.renderTarget2.setSize(e,t);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(e,t)}}),e.Pass=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1},Object.assign(e.Pass.prototype,{setSize:function(e,t){},render:function(e,t,i,n,a){console.error("THREE.Pass: .render() must be implemented in derived pass.")}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.GlitchPass=function(t){e.Pass.call(this),void 0===e.DigitalGlitch&&console.error("THREE.GlitchPass relies on THREE.DigitalGlitch");var i=e.DigitalGlitch;this.uniforms=e.UniformsUtils.clone(i.uniforms),void 0==t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new e.ShaderMaterial({uniforms:this.uniforms,vertexShader:i.vertexShader,fragmentShader:i.fragmentShader}),this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new e.Scene,this.quad=new e.Mesh(new e.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.goWild=!1,this.curF=0,this.generateTrigger()},e.GlitchPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.GlitchPass,render:function(t,i,n,a,s){this.uniforms.tDiffuse.value=n.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=e.Math.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=e.Math.randFloat(-1,1),this.uniforms.seed_y.value=e.Math.randFloat(-1,1),this.uniforms.distortion_x.value=e.Math.randFloat(0,1),this.uniforms.distortion_y.value=e.Math.randFloat(0,1)):0==this.goWild&&(this.uniforms.byp.value=1),this.quad.material=this.material,this.renderToScreen?t.render(this.scene,this.camera):t.render(this.scene,this.camera,i,this.clear)},generateTrigger:function(){this.randX=e.Math.randInt(120,240)},generateHeightmap:function(t){for(var i=new Float32Array(t*t*3),n=t*t,a=0;a<n;a++){var s=e.Math.randFloat(0,1);i[3*a+0]=s,i[3*a+1]=s,i[3*a+2]=s}var o=new e.DataTexture(i,t,t,e.RGBFormat,e.FloatType);return o.needsUpdate=!0,o}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.MaskPass=function(t,i){e.Pass.call(this),this.scene=t,this.camera=i,this.clear=!0,this.needsSwap=!1,this.inverse=!1},e.MaskPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.MaskPass,render:function(e,t,i,n,a){var s=e.context,o=e.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0);var r,c;this.inverse?(r=0,c=1):(r=1,c=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),o.buffers.stencil.setFunc(s.ALWAYS,r,4294967295),o.buffers.stencil.setClear(c),e.render(this.scene,this.camera,i,this.clear),e.render(this.scene,this.camera,t,this.clear),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(s.EQUAL,1,4294967295),o.buffers.stencil.setOp(s.KEEP,s.KEEP,s.KEEP)}}),e.ClearMaskPass=function(){e.Pass.call(this),this.needsSwap=!1},e.ClearMaskPass.prototype=Object.create(e.Pass.prototype),Object.assign(e.ClearMaskPass.prototype,{render:function(e,t,i,n,a){e.state.buffers.stencil.setTest(!1)}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.RenderPass=function(t,i,n,a,s){e.Pass.call(this),this.scene=t,this.camera=i,this.overrideMaterial=n,this.clearColor=a,this.clearAlpha=void 0!==s?s:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1},e.RenderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.RenderPass,render:function(e,t,i,n,a){var s=e.autoClear;e.autoClear=!1,this.scene.overrideMaterial=this.overrideMaterial;var o,r;this.clearColor&&(o=e.getClearColor().getHex(),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.render(this.scene,this.camera,this.renderToScreen?null:i,this.clear),this.clearColor&&e.setClearColor(o,r),this.scene.overrideMaterial=null,e.autoClear=s}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.SSAARenderPass=function(t,i,n,a){e.Pass.call(this),this.scene=t,this.camera=i,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==n?n:0,this.clearAlpha=void 0!==a?a:0,void 0===e.CopyShader&&console.error("THREE.SSAARenderPass relies on THREE.CopyShader");var s=e.CopyShader;this.copyUniforms=e.UniformsUtils.clone(s.uniforms),this.copyMaterial=new e.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:e.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.camera2=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene2=new e.Scene,this.quad2=new e.Mesh(new e.PlaneBufferGeometry(2,2),this.copyMaterial),this.quad2.frustumCulled=!1,this.scene2.add(this.quad2)},e.SSAARenderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.SSAARenderPass,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(t,i,n){this.sampleRenderTarget||(this.sampleRenderTarget=new e.WebGLRenderTarget(n.width,n.height,{minFilter:e.LinearFilter,magFilter:e.LinearFilter,format:e.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var a=e.SSAARenderPass.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],s=t.autoClear;t.autoClear=!1;var o=t.getClearColor().getHex(),r=t.getClearAlpha(),c=1/a.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var h=n.width,u=n.height,l=0;l<a.length;l++){var d=a[l];this.camera.setViewOffset&&this.camera.setViewOffset(h,u,.0625*d[0],.0625*d[1],h,u);var f=c;if(this.unbiased){f+=1/32*((l+.5)/a.length-.5)}this.copyUniforms.opacity.value=f,t.setClearColor(this.clearColor,this.clearAlpha),t.render(this.scene,this.camera,this.sampleRenderTarget,!0),0===l&&t.setClearColor(0,0),t.render(this.scene2,this.camera2,this.renderToScreen?null:i,0===l)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),t.autoClear=s,t.setClearColor(o,r)}}),e.SSAARenderPass.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.ShaderPass=function(t,i){e.Pass.call(this),this.textureID=void 0!==i?i:"tDiffuse",t instanceof e.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=e.UniformsUtils.clone(t.uniforms),this.material=new e.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.camera=new e.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new e.Scene,this.quad=new e.Mesh(new e.PlaneBufferGeometry(2,2),null),this.quad.frustumCulled=!1,this.scene.add(this.quad)},e.ShaderPass.prototype=Object.assign(Object.create(e.Pass.prototype),{constructor:e.ShaderPass,render:function(e,t,i,n,a){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=i.texture),this.quad.material=this.material,this.renderToScreen?e.render(this.scene,this.camera):e.render(this.scene,this.camera,t,this.clear)}})}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.AfterimageShader={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","return max( sign( x - y ), 0.0 );","}","void main() {","vec4 texelOld = texture2D( tOld, vUv );","vec4 texelNew = texture2D( tNew, vUv );","texelOld *= damp * when_gt( texelOld, 0.1 );","gl_FragColor = max(texelNew, texelOld);","}"].join("\n")}}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","vec4 texel = texture2D( tDiffuse, vUv );","gl_FragColor = opacity * texel;","}"].join("\n")}}).call(t,i(0))},function(e,t,i){"use strict";(function(e){e.DigitalGlitch={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","if(byp<1) {","vec2 p = vUv;","float xs = floor(gl_FragCoord.x / 0.5);","float ys = floor(gl_FragCoord.y / 0.5);","vec4 normal = texture2D (tDisp, p*seed*seed);","if(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","if(seed_x>0.){","p.y = 1. - (p.y + distortion_y);","}","else {","p.y = distortion_y;","}","}","if(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","if(seed_y>0.){","p.x=distortion_x;","}","else {","p.x = 1. - (p.x + distortion_x);","}","}","p.x+=normal.x*seed_x*(seed/5.);","p.y+=normal.y*seed_y*(seed/5.);","vec2 offset = amount * vec2( cos(angle), sin(angle));","vec4 cr = texture2D(tDiffuse, p + offset);","vec4 cga = texture2D(tDiffuse, p);","vec4 cb = texture2D(tDiffuse, p - offset);","gl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","vec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","gl_FragColor = gl_FragColor+ snow;","}","else {","gl_FragColor=texture2D (tDiffuse, vUv);","}","}"].join("\n")}}).call(t,i(0))},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 01 Morph.3c9eb580d458951ccc2880a0175a2dba.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 02 Whats your name again.48e1b9ebffd982622405499a5d4c19d3.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 03 S T A F.cb073ed8226b639b61ed8cc9673fb5e9.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 04 Inescapable.600b8a6c063bd098b9fa17a2e4127f8f.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 05 Short temper dove.b4922610c646f8a536c14aecaca8b2cf.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 06 Vicious Treat.ac1c3a8379ff9408f7c16689bccd56a9.mp3"},function(e,t,i){e.exports=i.p+"assets/Soft and Furious - The truth about RW - 07 Ocean Ending.3b61e30a5746b584a6f834cd12aab855.mp3"},function(e,t){e.exports="#define LIGHT_WORLD_SIZE 0.005\n#define LIGHT_FRUSTUM_WIDTH 3.75\n#define LIGHT_SIZE_UV (LIGHT_WORLD_SIZE / LIGHT_FRUSTUM_WIDTH)\n#define NEAR_PLANE 9.5\n#define NUM_SAMPLES 17\n#define NUM_RINGS 11\n#define BLOCKER_SEARCH_NUM_SAMPLES NUM_SAMPLES\n#define PCF_NUM_SAMPLES NUM_SAMPLES\nvec2 poissonDisk[NUM_SAMPLES];\nvoid initPoissonSamples( const in vec2 randomSeed ) {\n    float ANGLE_STEP = PI2 * float( NUM_RINGS ) / float( NUM_SAMPLES );\n    float INV_NUM_SAMPLES = 1.0 / float( NUM_SAMPLES );\n    // jsfiddle that shows sample pattern: https://jsfiddle.net/a16ff1p7/\n    float angle = rand( randomSeed ) * PI2;\n    float radius = INV_NUM_SAMPLES;\n    float radiusStep = radius;\n    for( int i = 0; i < NUM_SAMPLES; i ++ ) {\n        poissonDisk[i] = vec2( cos( angle ), sin( angle ) ) * pow( radius, 0.75 );\n        radius += radiusStep;\n        angle += ANGLE_STEP;\n    }\n}\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n    return (zReceiver - zBlocker) / zBlocker;\n}\nfloat findBlocker( sampler2D shadowMap, const in vec2 uv, const in float zReceiver ) {\n    // This uses similar triangles to compute what\n    // area of the shadow map we should search\n    float searchRadius = LIGHT_SIZE_UV * ( zReceiver - NEAR_PLANE ) / zReceiver;\n    float blockerDepthSum = 0.0;\n    int numBlockers = 0;\n    for( int i = 0; i < BLOCKER_SEARCH_NUM_SAMPLES; i++ ) {\n        float shadowMapDepth = unpackRGBAToDepth(texture2D(shadowMap, uv + poissonDisk[i] * searchRadius));\n        if ( shadowMapDepth < zReceiver ) {\n            blockerDepthSum += shadowMapDepth;\n            numBlockers ++;\n        }\n    }\n    if( numBlockers == 0 ) return -1.0;\n    return blockerDepthSum / float( numBlockers );\n}\nfloat PCF_Filter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius ) {\n    float sum = 0.0;\n    for( int i = 0; i < PCF_NUM_SAMPLES; i ++ ) {\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + poissonDisk[ i ] * filterRadius ) );\n        if( zReceiver <= depth ) sum += 1.0;\n    }\n    for( int i = 0; i < PCF_NUM_SAMPLES; i ++ ) {\n        float depth = unpackRGBAToDepth( texture2D( shadowMap, uv + -poissonDisk[ i ].yx * filterRadius ) );\n        if( zReceiver <= depth ) sum += 1.0;\n    }\n    return sum / ( 2.0 * float( PCF_NUM_SAMPLES ) );\n}\nfloat PCSS ( sampler2D shadowMap, vec4 coords ) {\n    vec2 uv = coords.xy;\n    float zReceiver = coords.z; // Assumed to be eye-space z in this code\n    initPoissonSamples( uv );\n    // STEP 1: blocker search\n    float avgBlockerDepth = findBlocker( shadowMap, uv, zReceiver );\n    //There are no occluders so early out (this saves filtering)\n    if( avgBlockerDepth == -1.0 ) return 1.0;\n    // STEP 2: penumbra size\n    float penumbraRatio = penumbraSize( zReceiver, avgBlockerDepth );\n    float filterRadius = penumbraRatio * LIGHT_SIZE_UV * NEAR_PLANE / zReceiver;\n    // STEP 3: filtering\n    //return avgBlockerDepth;\n    return PCF_Filter( shadowMap, uv, zReceiver, filterRadius );\n}"},function(e,t){e.exports="//\n// Description : Array and textureless GLSL 2D/3D/4D simplex\n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n//\n\nvec3 mod289(vec3 x) {\n return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 mod289(vec4 x) {\n return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nvec4 permute(vec4 x) {\n    return mod289(((x*34.0)+1.0)*x);\n}\n\nvec4 taylorInvSqrt(vec4 r)\n{\n return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nfloat snoise(vec3 v)\n {\n const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n vec3 i  = floor(v + dot(v, C.yyy) );\n vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n vec3 g = step(x0.yzx, x0.xyz);\n vec3 l = 1.0 - g;\n vec3 i1 = min( g.xyz, l.zxy );\n vec3 i2 = max( g.xyz, l.zxy );\n\n //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n //   x1 = x0 - i1  + 1.0 * C.xxx;\n //   x2 = x0 - i2  + 2.0 * C.xxx;\n //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n vec3 x1 = x0 - i1 + C.xxx;\n vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n i = mod289(i);\n vec4 p = permute( permute( permute(\n            i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n          + i.y + vec4(0.0, i1.y, i2.y, 1.0 ))\n          + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n float n_ = 0.142857142857; // 1.0/7.0\n vec3  ns = n_ * D.wyz - D.xzx;\n\n vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n vec4 x_ = floor(j * ns.z);\n vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n vec4 x = x_ *ns.x + ns.yyyy;\n vec4 y = y_ *ns.x + ns.yyyy;\n vec4 h = 1.0 - abs(x) - abs(y);\n\n vec4 b0 = vec4( x.xy, y.xy );\n vec4 b1 = vec4( x.zw, y.zw );\n\n //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n vec4 s0 = floor(b0)*2.0 + 1.0;\n vec4 s1 = floor(b1)*2.0 + 1.0;\n vec4 sh = -step(h, vec4(0.0));\n\n vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n vec3 p0 = vec3(a0.xy,h.x);\n vec3 p1 = vec3(a0.zw,h.y);\n vec3 p2 = vec3(a1.xy,h.z);\n vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n p0 *= norm.x;\n p1 *= norm.y;\n p2 *= norm.z;\n p3 *= norm.w;\n\n// Mix final noise value\n vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n m = m * m;\n return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1),\n                               dot(p2,x2), dot(p3,x3) ) );\n }"},function(e,t){e.exports="varying vec2 vUv;\nuniform vec2 scale;\nuniform vec2 offset;\n\nvoid main( void ) {\n\n    vUv = uv * scale + offset;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}"}],[3]);